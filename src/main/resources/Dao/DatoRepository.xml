<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.DatoRepository">



    <resultMap id="listDataofDepartament" type="com.example.demo.dto.DatoDto" >
        <result column="idDato" property="idDato"/>
        <result column="dato" property="dato"/>
        <result column="fecha" property="fecha"/>
        <result column="tipoDeDato" property="tipoDeDato"/>
        <result column="txUser" property="txUser"/>
        <result column="txHost" property="txHost"/>
        <result column="txDate" property="txDate"/>
        <result column="idZona" property="idZona"/>
    </resultMap>

    <select id="dataofDepartament" resultMap="listDataofDepartament">

        select a.id_dato as idDato, a.dato as dato, a.fecha as fecha,
               d.tipo_de_dato as tipoDeDato,a.tx_user as txUser,
               a.tx_host as txHost, a.tx_date as txDate, b.id_zona as idZona
        from dato a, zona b, departamento c, tipodedato d
        where a.zona_id_zona = b.id_zona
          and b.Departamento_id_dep = c.id_dep
          and d.id_tdd = a.tipodedato_id_tdd
          and c.id_dep= #{idDepartment}

    </select>

</mapper>
