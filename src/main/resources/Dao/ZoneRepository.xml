<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.ZonaRepository">
    <select id="getZoneByDepartment" resultType="java.lang.Integer">
        SELECT z.id_zona
        FROM departamento d,
             municipio m,
             zona z
        WHERE d.id_dep = z.Departamento_id_dep
          AND z.Municipio_id_municipio = m.id_municipio
          AND d.Nombre = #{department}
          AND m.Nombre = #{municipalities}
        LIMIT 1;
    </select>
</mapper>
