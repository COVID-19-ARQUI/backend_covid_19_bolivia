<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.DepartmentRepository">

    <select id="getMunicipalities" resultType="java.lang.String">
        SELECT m.municipality
        FROM locations l,
             municipalities m
        WHERE l.id_municipality = m.id_municipality
          AND l.id_departament = #{idDepartment}
          AND m.id_municipality > 0
    </select>

    <select id="getDataByDepartmentsId" resultType="com.example.demo.dto.DataSimpleDto">
        select b.data as data, b.in_date as inDate, d.id_datatype as datatype
        from departaments a,
             data b,
             locations c,
             datatypes d
        where b.id_location = c.id_location
          and a.id_departament = c.id_departament
          and d.id_datatype = b.id_datatype
          and a.id_departament = #{departmentId}
    </select>

    <select id="getDepartments" resultType="com.example.demo.domain.Departments">
        SELECT d.id_departament as idDepartment,
               d.department     as department
        FROM departaments d
    </select>


</mapper>